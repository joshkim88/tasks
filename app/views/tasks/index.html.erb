
<br>

<div class="searchBar text-center pb-4">
  <%= form_tag tasks_path, method: :get do %>
  <%= text_field_tag :query,
    params[:query],
    class: "form",
    placeholder: "Search for a task"
  %>
  <%= submit_tag "Search", class: "btn btn-primary" %>
<% end %>
</div>

<br>


  <div class="text-center">
    <h3>
      <a href="btn btn-primary">
        <%= link_to 'Add a new task', new_task_path %>
      </a>
    </h3>
  </div>

  <div class="text-center p-4">
    <h1>
      All Tasks
    </h1>
  </div>

  <table class="table">
  <thead>
    <tr>
      <th>Task</th>
      <th>Description</th>
      <th>Date assigned</th>
      <th>Due date</th>
      <th>Overdue?</th>
      <th>Completed?</th>
      <th>Created by</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @tasks.each do |task| %>
      <tr>
        <td><%= task.title %></td>
        <td><%= task.description %></td>
        <td><%= task.created_at %></td>
        <td><%= task.duedate %></td>
        <td><%= task.overdue? %></td>
        <td><%= task.completed %></td>
        <td><%= task.user.email %></td>
        <td><%= link_to 'View', task %></td>
        <% if task.user == current_user %>
        <td><%= link_to 'Edit', edit_task_path(task) %></td>
        <td><%= link_to 'Delete', task, method: :delete, data: { confirm: 'Are you sure?' } %></td>
        <% end %>
      </tr>
    <% end %>
  </tbody>
</table>

<br>
<br>

  <div class="text-center">
    <h1>
      Due Today!
    </h1>
  </div>

<table class="table">
  <thead>
    <tr>
      <th>Task</th>
      <th>Description</th>
      <th>Date assigned</th>
      <th>Due date</th>
      <th>Overdue?</th>
      <th>Completed?</th>
      <th>Created by</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @tasks.due_today.each do |task| %>
      <tr>
        <td><%= task.title %></td>
        <td><%= task.description %></td>
        <td><%= task.created_at %></td>
        <td><%= task.duedate %></td>
        <td><%= task.overdue? %></td>
        <td><%= task.completed %></td>
        <td><%= task.user.email %></td>
        <td><%= link_to 'View', task %></td>
        <% if task.user == current_user %>
        <td><%= link_to 'Edit', edit_task_path(task) %></td>
        <td><%= link_to 'Delete', task, method: :delete, data: { confirm: 'Are you sure?' } %></td>
        <% end %>
      </tr>
    <% end %>
  </tbody>
</table>

<br>

  <div class="text-center">
    <h1>
      Your Tasks.
    </h1>
  </div>

<table class="table">
  <thead>
    <tr>
      <th>Task</th>
      <th>Description</th>
      <th>Date assigned</th>
      <th>Due date</th>
      <th>Overdue?</th>
      <th>Completed?</th>
      <th>Created by</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% current_user.tasks.each do |task| %>
      <tr>
        <td><%= task.title %></td>
        <td><%= task.description %></td>
        <td><%= task.created_at %></td>
        <td><%= task.duedate %></td>
        <td><%= task.overdue? %></td>
        <td><%= task.completed %></td>
        <td><%= task.user.email %></td>
        <td><%= link_to 'View', task %></td>
        <% if task.user == current_user %>
        <td><%= link_to 'Edit', edit_task_path(task) %></td>
        <td><%= link_to 'Delete', task, method: :delete, data: { confirm: 'Are you sure?' } %></td>
        <% end %>
      </tr>
    <% end %>
  </tbody>
</table>
